!function(e){function t(t){for(var r,i,c=t[0],s=t[1],u=t[2],f=0,p=[];f<c.length;f++)i=c[f],a[i]&&p.push(a[i][0]),a[i]=0;for(r in s)Object.prototype.hasOwnProperty.call(s,r)&&(e[r]=s[r]);for(l&&l(t);p.length;)p.shift()();return o.push.apply(o,u||[]),n()}function n(){for(var e,t=0;t<o.length;t++){for(var n=o[t],r=!0,c=1;c<n.length;c++){var s=n[c];0!==a[s]&&(r=!1)}r&&(o.splice(t--,1),e=i(i.s=n[0]))}return e}var r={},a={0:0},o=[];function i(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=r,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(n,r,function(t){return e[t]}.bind(null,r));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="";var c=window.webpackJsonp=window.webpackJsonp||[],s=c.push.bind(c);c.push=t,c=c.slice();for(var u=0;u<c.length;u++)t(c[u]);var l=s;o.push([367,1]),n()}({10:function(e){e.exports={b:"https://api.unsplash.com",a:"UPLaj3YzLjhdRB7mX2zCslbuLPyf1XXpkUc1Hxhkd28",f:"XfLUeY3re7H1-fzLrbA1LkpqcpogVG3Jshi_8qQGlQA",c:"https://unsplash.com/oauth/authorize",h:"https://unsplash.com/oauth/token",d:"http://ct90046.tmweb.ru",e:"public+write_likes",g:"=qV6je9*pQjgeLxC"}},357:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return r}));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function r(){"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}}).call(this,n(134))},367:function(e,t,n){n(368),e.exports=n(726)},701:function(e,t,n){var r={"./af":221,"./af.js":221,"./ar":222,"./ar-dz":223,"./ar-dz.js":223,"./ar-kw":224,"./ar-kw.js":224,"./ar-ly":225,"./ar-ly.js":225,"./ar-ma":226,"./ar-ma.js":226,"./ar-sa":227,"./ar-sa.js":227,"./ar-tn":228,"./ar-tn.js":228,"./ar.js":222,"./az":229,"./az.js":229,"./be":230,"./be.js":230,"./bg":231,"./bg.js":231,"./bm":232,"./bm.js":232,"./bn":233,"./bn-bd":234,"./bn-bd.js":234,"./bn.js":233,"./bo":235,"./bo.js":235,"./br":236,"./br.js":236,"./bs":237,"./bs.js":237,"./ca":238,"./ca.js":238,"./cs":239,"./cs.js":239,"./cv":240,"./cv.js":240,"./cy":241,"./cy.js":241,"./da":242,"./da.js":242,"./de":243,"./de-at":244,"./de-at.js":244,"./de-ch":245,"./de-ch.js":245,"./de.js":243,"./dv":246,"./dv.js":246,"./el":247,"./el.js":247,"./en-au":248,"./en-au.js":248,"./en-ca":249,"./en-ca.js":249,"./en-gb":250,"./en-gb.js":250,"./en-ie":251,"./en-ie.js":251,"./en-il":252,"./en-il.js":252,"./en-in":253,"./en-in.js":253,"./en-nz":254,"./en-nz.js":254,"./en-sg":255,"./en-sg.js":255,"./eo":256,"./eo.js":256,"./es":257,"./es-do":258,"./es-do.js":258,"./es-mx":259,"./es-mx.js":259,"./es-us":260,"./es-us.js":260,"./es.js":257,"./et":261,"./et.js":261,"./eu":262,"./eu.js":262,"./fa":263,"./fa.js":263,"./fi":264,"./fi.js":264,"./fil":265,"./fil.js":265,"./fo":266,"./fo.js":266,"./fr":267,"./fr-ca":268,"./fr-ca.js":268,"./fr-ch":269,"./fr-ch.js":269,"./fr.js":267,"./fy":270,"./fy.js":270,"./ga":271,"./ga.js":271,"./gd":272,"./gd.js":272,"./gl":273,"./gl.js":273,"./gom-deva":274,"./gom-deva.js":274,"./gom-latn":275,"./gom-latn.js":275,"./gu":276,"./gu.js":276,"./he":277,"./he.js":277,"./hi":278,"./hi.js":278,"./hr":279,"./hr.js":279,"./hu":280,"./hu.js":280,"./hy-am":281,"./hy-am.js":281,"./id":282,"./id.js":282,"./is":283,"./is.js":283,"./it":284,"./it-ch":285,"./it-ch.js":285,"./it.js":284,"./ja":286,"./ja.js":286,"./jv":287,"./jv.js":287,"./ka":288,"./ka.js":288,"./kk":289,"./kk.js":289,"./km":290,"./km.js":290,"./kn":291,"./kn.js":291,"./ko":292,"./ko.js":292,"./ku":293,"./ku.js":293,"./ky":294,"./ky.js":294,"./lb":295,"./lb.js":295,"./lo":296,"./lo.js":296,"./lt":297,"./lt.js":297,"./lv":298,"./lv.js":298,"./me":299,"./me.js":299,"./mi":300,"./mi.js":300,"./mk":301,"./mk.js":301,"./ml":302,"./ml.js":302,"./mn":303,"./mn.js":303,"./mr":304,"./mr.js":304,"./ms":305,"./ms-my":306,"./ms-my.js":306,"./ms.js":305,"./mt":307,"./mt.js":307,"./my":308,"./my.js":308,"./nb":309,"./nb.js":309,"./ne":310,"./ne.js":310,"./nl":311,"./nl-be":312,"./nl-be.js":312,"./nl.js":311,"./nn":313,"./nn.js":313,"./oc-lnc":314,"./oc-lnc.js":314,"./pa-in":315,"./pa-in.js":315,"./pl":316,"./pl.js":316,"./pt":317,"./pt-br":318,"./pt-br.js":318,"./pt.js":317,"./ro":319,"./ro.js":319,"./ru":320,"./ru.js":320,"./sd":321,"./sd.js":321,"./se":322,"./se.js":322,"./si":323,"./si.js":323,"./sk":324,"./sk.js":324,"./sl":325,"./sl.js":325,"./sq":326,"./sq.js":326,"./sr":327,"./sr-cyrl":328,"./sr-cyrl.js":328,"./sr.js":327,"./ss":329,"./ss.js":329,"./sv":330,"./sv.js":330,"./sw":331,"./sw.js":331,"./ta":332,"./ta.js":332,"./te":333,"./te.js":333,"./tet":334,"./tet.js":334,"./tg":335,"./tg.js":335,"./th":336,"./th.js":336,"./tk":337,"./tk.js":337,"./tl-ph":338,"./tl-ph.js":338,"./tlh":339,"./tlh.js":339,"./tr":340,"./tr.js":340,"./tzl":341,"./tzl.js":341,"./tzm":342,"./tzm-latn":343,"./tzm-latn.js":343,"./tzm.js":342,"./ug-cn":344,"./ug-cn.js":344,"./uk":345,"./uk.js":345,"./ur":346,"./ur.js":346,"./uz":347,"./uz-latn":348,"./uz-latn.js":348,"./uz.js":347,"./vi":349,"./vi.js":349,"./x-pseudo":350,"./x-pseudo.js":350,"./yo":351,"./yo.js":351,"./zh-cn":352,"./zh-cn.js":352,"./zh-hk":353,"./zh-hk.js":353,"./zh-mo":354,"./zh-mo.js":354,"./zh-tw":355,"./zh-tw.js":355};function a(e){var t=o(e);return n(t)}function o(e){var t=r[e];if(!(t+1)){var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}return t}a.keys=function(){return Object.keys(r)},a.resolve=o,e.exports=a,a.id=701},722:function(e,t,n){},726:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),o=n(68),i=n.n(o),c=n(57),s=n(42),u=n(357),l=n(12),f=n(59),p=n(358),m=n.n(p),d=n(69),b=n(70),g=function(){return a.a.createElement("div",{className:"text-center my-3 text-muted"},a.a.createElement(d.a,{className:"mr-2",icon:b.c,size:"2x",spin:!0}),"Загрузка...")},y=n(359),h=function(e){var t=e.liked,n=e.onClick,r=e.likeCount;return a.a.createElement("button",{onClick:n,className:"like d-flex align-items-center"},a.a.createElement(d.a,{className:"like__icon mr-1",icon:t?b.b:y.a}),a.a.createElement("span",{className:"like__count text-dark"},r))},j=n(71),v=n.n(j),k=n(10);v.a.interceptors.response.use(null,(function(e){return e.response&&e.response.status>=400&&e.response.status<500||f.toast.error("Ошибка запроса."),e&&403===e.response.status&&f.toast.error("Превышен лимит запросов к API."),Promise.reject(e)}));var w=function(e){v.a.defaults.headers.Authorization=e?"Bearer ".concat(e):"Client-ID ".concat(k.a)},O={get:v.a.get,post:v.a.post,delete:v.a.delete},E="".concat(k.b,"/photos"),P=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return O.get("".concat(E,"/?page=").concat(e))},_="".concat(k.b,"/photos"),x=function(e){return O.post("".concat(_,"/").concat(e,"/like"))},S=function(e){return O.delete("".concat(_,"/").concat(e,"/like"))},L=n(1),N=n.n(L),I=n(360),R=n.n(I);function z(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function C(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var D=function(e){return e.map((function(e){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?z(Object(n),!0).forEach((function(t){C(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):z(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({uid:R.a.generate()},e)}))},A=function(e){return e.map((function(e){var t=e.id,n=e.created_at,r=e.description,a=e.liked_by_user,o=e.likes,i=e.user,c=i.name,s=i.profile_image,u=s.small,l=s.medium,f=i.links.html,p=e.urls;return{id:t,created_at:n,description:r,liked_by_user:a,likes:o,user:{name:c,profile_image:{small:u,medium:l},links:{html:f}},urls:{small:p.small,regular:p.regular}}}))},U="REQUEST_IMAGES",T="RECEIVE_IMAGES",M="SET_LIKE",B="DELETE_LIKE",G="RECEIVE_USER",Y="USER_LOGGING_IN";function q(e,t,n,r,a,o,i){try{var c=e[o](i),s=c.value}catch(e){return void n(e)}c.done?t(s):Promise.resolve(s).then(r,a)}function F(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){q(o,r,a,i,c,"next",e)}function c(e){q(o,r,a,i,c,"throw",e)}i(void 0)}))}}var H=function(e,t){return{type:T,images:e,lastPage:t}};function Q(e){return(Q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function V(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function W(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function X(e,t){return(X=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function J(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Z(e);if(t){var a=Z(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return K(this,n)}}function K(e,t){return!t||"object"!==Q(t)&&"function"!=typeof t?$(e):t}function $(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Z(e){return(Z=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ee(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var te=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&X(e,t)}(i,e);var t,n,r,o=J(i);function i(){var e;V(this,i);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return ee($(e=o.call.apply(o,[this].concat(n))),"state",{currentPage:1}),ee($(e),"handleScroll",(function(){var t=e.props,n=t.isLoading,r=t.lastPage,a=t.fetchImages;if(!(n||r<=e.state.currentPage)){var o=document.querySelector(".image:last-child"),i=o.offsetTop+o.clientHeight;window.pageYOffset+window.innerHeight>i-80&&e.setState((function(e){return{currentPage:e.currentPage+1}}),(function(){return a(e.state.currentPage)}))}})),ee($(e),"isImageLiked",(function(t){return e.props.images.find((function(e){return e.id===t})).liked_by_user})),ee($(e),"handleLike",(function(t){e.props.user?e.isImageLiked(t)?e.props.deleteLike(t):e.props.setLike(t):f.toast.info("Авторизуйтесь, чтобы поставить лайк!")})),e}return t=i,(n=[{key:"componentDidMount",value:function(){this.props.isLoggingIn||this.props.fetchImages(),window.addEventListener("scroll",this.handleScroll)}},{key:"componentDidUpdate",value:function(e,t){e.isLoggingIn!==this.props.isLoggingIn&&this.props.fetchImages()}},{key:"render",value:function(){var e=this,t=this.props,n=t.images,r=t.isLoading;return a.a.createElement(a.a.Fragment,null,a.a.createElement(m.a,{className:"row"},n.map((function(t){return a.a.createElement("div",{key:t.uid,className:"col-md-6 col-lg-4 mb-3 image"},a.a.createElement("div",{className:"card position-relative"},a.a.createElement(c.b,{to:{pathname:"/image/".concat(t.id),state:{modal:!0},imageId:t.id,onLike:function(){return e.handleLike(t.id)}}},a.a.createElement("img",{className:"card-img-top",src:t.urls.small,alt:t.description||t.user.name})),a.a.createElement("div",{className:"card-body"},a.a.createElement(h,{liked:t.liked_by_user,likeCount:t.likes,onClick:function(){return e.handleLike(t.id)}}),a.a.createElement("div",{className:"card-text"},a.a.createElement("div",{className:"d-flex align-items-center mb-3"},a.a.createElement("img",{className:"rounded-circle mr-2 d-sm-none d-md-inline-block",src:t.user.profile_image.small,alt:t.user.name}),a.a.createElement("a",{className:"text-dark",href:t.user.links.html,target:"_blank",rel:"noopener noreferrer"},t.user.name)),a.a.createElement("small",{className:"text-muted"},"Опубликовано: ",(n=t.created_at,N()(n).format("DD.MM.YYYY")))))));var n}))),r&&a.a.createElement(g,null))}}])&&W(t.prototype,n),r&&W(t,r),i}(r.Component),ne=Object(s.b)((function(e){return{images:e.images.items,isLoading:e.images.isLoading,lastPage:e.images.lastPage,user:!!e.user.authUser.id,isLoggingIn:e.user.isLoggingIn}}),{fetchImages:function(e){return function(){var t=F(regeneratorRuntime.mark((function t(n){var r,a,o,i,c;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,P(e);case 3:return r=t.sent,a=r.data,o=r.headers,i=D(A(a)),c=Math.round(o["x-total"]/10),t.abrupt("return",n(H(i,c)));case 11:t.prev=11,t.t0=t.catch(0);case 13:n({type:U});case 14:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(e){return t.apply(this,arguments)}}()},setLike:function(e){return function(){var t=F(regeneratorRuntime.mark((function t(n){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,x(e);case 3:t.next=7;break;case 5:t.prev=5,t.t0=t.catch(0);case 7:n({type:M,imageId:e});case 8:case"end":return t.stop()}}),t,null,[[0,5]])})));return function(e){return t.apply(this,arguments)}}()},deleteLike:function(e){return function(){var t=F(regeneratorRuntime.mark((function t(n){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,S(e);case 3:t.next=7;break;case 5:t.prev=5,t.t0=t.catch(0);case 7:n({type:B,imageId:e});case 8:case"end":return t.stop()}}),t,null,[[0,5]])})));return function(e){return t.apply(this,arguments)}}()}})(te),re=n(361);function ae(e){return(ae="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function oe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ie(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ce(e,t){return(ce=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function se(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=fe(e);if(t){var a=fe(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return ue(this,n)}}function ue(e,t){return!t||"object"!==ae(t)&&"function"!=typeof t?le(e):t}function le(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function fe(e){return(fe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function pe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var me=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ce(e,t)}(i,e);var t,n,r,o=se(i);function i(){var e;oe(this,i);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return pe(le(e=o.call.apply(o,[this].concat(n))),"handleCloseModal",(function(t){t.stopPropagation(),e.props.history.goBack()})),e}return t=i,(n=[{key:"render",value:function(){var e=this.props.image,t=this.props.location.onLike;return a.a.createElement(re.a,{styles:{modal:{maxWidth:"992px"},closeButton:{cursor:"pointer",outline:"none"}},open:!0,onClose:this.handleCloseModal},a.a.createElement("div",{className:"d-flex flex-wrap align-items-center mt-4 mb-2 image-detail"},a.a.createElement("img",{className:"rounded-circle mr-3",src:e.user.profile_image.medium,alt:e.user.name}),a.a.createElement("a",{className:"text-dark lead mr-auto",href:e.user.links.html,target:"_blank",rel:"noopener noreferrer"},e.user.name),a.a.createElement(h,{liked:e.liked_by_user,likeCount:e.likes,onClick:function(){return t(e.id)}})),a.a.createElement("img",{className:"img-fluid",src:e.urls.regular,alt:e.user.name}))}}])&&ie(t.prototype,n),r&&ie(t,r),i}(r.Component),de=function(e,t){return e.images.items.find((function(e){return e.id===t.location.imageId}))},be=Object(s.b)((function(e,t){return{image:de(e,t)}}))(me),ge=function(){return a.a.createElement("div",{className:"page-not-found"},a.a.createElement("h1",{className:"text-dark not-page"},"Страница не найдена!"))};function ye(e,t,n,r,a,o,i){try{var c=e[o](i),s=c.value}catch(e){return void n(e)}c.done?t(s):Promise.resolve(s).then(r,a)}var he={getAuthUrl:function(){return encodeURI("".concat(k.c,"?client_id=").concat(k.a,"&redirect_uri=").concat(k.d,"&response_type=code&scope=").concat(k.e))},getBearerToken:function(){var e,t=(e=regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.post(k.h,{client_id:k.a,client_secret:k.f,redirect_uri:k.d,code:t,grant_type:"authorization_code"});case 2:n=e.sent,r=n.data,localStorage[k.g]=r.access_token,w(localStorage[k.g]);case 6:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){ye(o,r,a,i,c,"next",e)}function c(e){ye(o,r,a,i,c,"throw",e)}i(void 0)}))});return function(e){return t.apply(this,arguments)}}()},je=Object(s.b)((function(e){return{user:e.user.authUser}}))((function(e){var t=e.user;return a.a.createElement("nav",{className:"navbar sticky-top navbar-expand-sm navbar-light bg-light"},a.a.createElement("div",{className:"container"},a.a.createElement(c.b,{className:"navbar-brand d-flex align-items-center",to:"/"},a.a.createElement(d.a,{className:"mr-2",icon:b.a,size:"2x"})),a.a.createElement("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbar","aria-controls":"navbar","aria-expanded":"false","aria-label":"Toggle navigation"},a.a.createElement("span",{className:"navbar-toggler-icon"})),a.a.createElement("div",{className:"collapse navbar-collapse",id:"navbar"},a.a.createElement("div",{className:"navbar-nav ml-auto"},t.id&&a.a.createElement("div",{className:"d-flex py-3 py-sm-0"},a.a.createElement("img",{className:"rounded-circle mr-2",src:t.profile_image.small,alt:t.name,width:"40",height:"40"}),a.a.createElement("span",{className:"navbar-text"},t.name),a.a.createElement("button",{className:"btn btn-dark ml-auto ml-sm-4",onClick:function(){localStorage.removeItem(k.g),window.location="/"}},"Выйти")),!t.id&&a.a.createElement("div",{className:"d-flex py-3 py-sm-0"},a.a.createElement("button",{className:"btn btn-dark ml-auto ml-sm-4",onClick:function(){window.location=he.getAuthUrl()}},"Войти"))))))}));function ve(e){return(ve="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ke(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function we(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Oe(e,t){return(Oe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ee(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=xe(e);if(t){var a=xe(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Pe(this,n)}}function Pe(e,t){return!t||"object"!==ve(t)&&"function"!=typeof t?_e(e):t}function _e(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function xe(e){return(xe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Se(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Le=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Oe(e,t)}(i,e);var t,n,r,o=Ee(i);function i(){var e;ke(this,i);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Se(_e(e=o.call.apply(o,[this].concat(n))),"previousLocation",e.props.location),e}return t=i,(n=[{key:"UNSAFE_componentWillUpdate",value:function(e){var t=this.props.location;"POP"===e.history.action||t.state&&t.state.modal||(this.previousLocation=this.props.location)}},{key:"render",value:function(){var e=this.props.location,t=!(!e.state||!e.state.modal||this.previousLocation===e);return a.a.createElement(a.a.Fragment,null,a.a.createElement(f.ToastContainer,null),a.a.createElement(je,null),a.a.createElement("main",{className:"container py-5"},a.a.createElement(l.d,{location:t?this.previousLocation:e},a.a.createElement(l.b,{path:"/",exact:!0,component:ne}),a.a.createElement(l.a,{to:"/not-found"}),a.a.createElement(l.b,{path:"/not-found",component:ge})),t?a.a.createElement(l.b,{path:"/image/:id",component:be}):null))}}])&&we(t.prototype,n),r&&we(t,r),i}(r.Component),Ne=Object(l.g)(Le),Ie=(n(718),n(720),n(721),n(722),n(58));function Re(e){return function(e){if(Array.isArray(e))return ze(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return ze(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ze(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ze(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Ce(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function De(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ce(Object(n),!0).forEach((function(t){Ae(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ce(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ae(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Ue={items:[],isLoading:!1,lastPage:0},Te=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ue,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case U:return De(De({},e),{},{isLoading:!0});case T:return De(De({},e),{},{items:[].concat(Re(e.items),Re(t.images)),isLoading:!1,lastPage:t.lastPage});case M:var n=Re(e.items),r=n.findIndex((function(e){return e.id===t.imageId}));return n[r]=De({},n[r]),n[r].liked_by_user=!0,n[r].likes=n[r].likes+1,De(De({},e),{},{items:n});case B:var a=Re(e.items),o=a.findIndex((function(e){return e.id===t.imageId}));return a[o]=De({},a[o]),a[o].liked_by_user=!1,a[o].likes=a[o].likes-1,De(De({},e),{},{items:a});default:return e}};function Me(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Be(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Me(Object(n),!0).forEach((function(t){Ge(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Me(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ge(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Ye={authUser:{},isLoggingIn:!1},qe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ye,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case G:return Be(Be({},e),{},{authUser:t.user,isLoggingIn:!1});case Y:return Be(Be({},e),{},{isLoggingIn:!0});default:return e}},Fe=Object(Ie.c)({images:Te,user:qe}),He=n(365),Qe="".concat(k.b,"/me");function Ve(e,t,n,r,a,o,i){try{var c=e[o](i),s=c.value}catch(e){return void n(e)}c.done?t(s):Promise.resolve(s).then(r,a)}var We=function(e){return{type:G,user:e}},Xe=function(){return function(){var e,t=(e=regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,O.get(Qe);case 3:return n=e.sent,r=n.data,e.abrupt("return",t(We(r)));case 8:e.prev=8,e.t0=e.catch(0);case 10:case"end":return e.stop()}}),e,null,[[0,8]])})),function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){Ve(o,r,a,i,c,"next",e)}function c(e){Ve(o,r,a,i,c,"throw",e)}i(void 0)}))});return function(e){return t.apply(this,arguments)}}()},Je=n(366),Ke=n.n(Je),$e=Object(Ie.d)(Fe,Object(Ie.a)(He.a)),Ze=localStorage[k.g];w(Ze),Ze&&$e.dispatch(Xe());var et=Ke.a.parse(window.location.search),tt=et.code,nt=et.error;if(tt&&64===tt.length){window.history.replaceState({},null,"/"),$e.dispatch({type:Y});try{he.getBearerToken(tt).then((function(){$e.dispatch(Xe())}))}catch(e){}}nt&&window.history.replaceState({},null,"/"),i.a.render(a.a.createElement(c.a,null,a.a.createElement(s.a,{store:$e},a.a.createElement(Ne,null))),document.getElementById("root")),u.a()}});